% https://creativecommons.org/publicdomain/zero/1.0/

\ProvidesFile{color.cfg}%
  [2024/02/28 v1.12 sample color configuration]%

% Using l3 would be nicer here, but this one also works with very old LaTeX
\def\Gin@DeclareEngineClashs#1{%
  \@ifpackageloaded{xcolor}{%
    \@for \@@tmp:=#1 \do {%
      \edef\@@tmp{%
        \noexpand\DeclareKeys
          {
            \@@tmp .code = {%
              \noexpand\PackageWarningNoLine{xcolor}{%
                Explicit driver option \@@tmp\noexpand\space
                ignored,\noexpand\MessageBreak
                because detected engine does not support
                it.\noexpand\MessageBreak
                We recommend to remove the explicit driver
                option.\noexpand\MessageBreak
                Still staying with driver \noexpand\Gin@driver
              }%
            },
            \@@tmp .usage=load
          }%
        }%
      \@@tmp
    }%
  }{%	
    \@for \@tempa:=#1 \do {%
      \DeclareOption{\@tempa}{%
	\PackageWarningNoLine{color}{%
	  Explict driver option \CurrentOption\space ignored,\MessageBreak
	  because detected engine does not support it.\MessageBreak
	  We recommend to remove the explicit driver option.\MessageBreak
	  Still staying with driver \Gin@driver
	}%
      }%
    }%
  }%
}

% Select an appropriate default driver
\begingroup
  \chardef\x=0\relax
  % check luatex
  \ifx\luatexversion\@undefined
  % check pdfTeX
  \@ifundefined{pdfoutput}{}{%
    \ifnum\pdfoutput<1 %
    \else
      \chardef\x=1\relax
    \fi
  }%
  % check VTeX
  \@ifundefined{OpMode}{}{%
    \chardef\x=2\relax
  }%
  % check XeTeX
  \@ifundefined{XeTeXversion}{}{%
    \chardef\x=3\relax
  }%
  \else
    \ifnum\luatexversion>85
      \ifnum\outputmode>0
      \chardef\x=4\relax
      \fi
    \else
      \ifnum\pdfoutput>0
      \chardef\x=1\relax
      \fi
    \fi
  \fi
\expandafter\endgroup
\ifcase\x
  % default case
  \def\Gin@driver{dvips.def}%
  \ExecuteOptions{dvips}%
  \Gin@DeclareEngineClashs{pdftex,vtex,xetex,luatex}%
\or
  % pdfTeX is running in pdf mode
  \def\Gin@driver{pdftex.def}%
  \ExecuteOptions{pdftex}%
  \Gin@DeclareEngineClashs{dvips,xdvi,dvipdf,dvipdfm,dvipdftmx,xetex,luatex,dvisvgm,dvipsone,dviwindo,emtex,dviwin,oztex,textures,pctexwin,pctexhp,pctex32,truetex,tcidvi,vtex}%
\or
  % VTeX is running
  \def\Gin@driver{vtex.def}%
  \ExecuteOptions{vtex}%
  \Gin@DeclareEngineClashs{dvips,xdvi,dvipdf,dvipdfm,dvipdftmx,xetex,pdftex,luatex,dvisvgm,dvipsone,dviwindo,emtex,dviwin,oztex,textures,pctexwin,pctexhp,pctex32,truetex,tcidvi}%
\or
  % XeTeX is running
  \def\Gin@driver{xetex.def}%
  \ExecuteOptions{xetex}%
  \Gin@DeclareEngineClashs{dvips,xdvi,dvipdf,dvipdfm,dvipdftmx,pdftex,luatex,dvisvgm,dvipsone,dviwindo,emtex,dviwin,oztex,textures,pctexwin,pctexhp,pctex32,truetex,tcidvi,vtex}%
\or
  % luatex (> 0.85)
  \def\Gin@driver{luatex.def}%
  \ExecuteOptions{luatex}%
  \Gin@DeclareEngineClashs{dvips,xdvi,dvipdf,dvipdfm,dvipdftmx,xetex,pdftex,dvisvgm,dvipsone,dviwindo,emtex,dviwin,oztex,textures,pctexwin,pctexhp,pctex32,truetex,tcidvi,vtex}%
\else
  \PackageError{color}{Unexpected configuration}{}
\fi
\endinput
